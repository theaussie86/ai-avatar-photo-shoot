---
phase: 02-core-prompt-generation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/video-prompt-schemas.ts
  - lib/video-prompts.ts
autonomous: true

must_haves:
  truths:
    - "Camera styles and film effects are defined as typed constants"
    - "Zod schema validates video prompt generation input"
    - "German system prompt instructs Gemini to generate video-ready prompts"
  artifacts:
    - path: "lib/video-prompt-schemas.ts"
      provides: "Video prompt configuration types and Zod schema"
      exports: ["CAMERA_STYLES", "FILM_EFFECTS", "VideoPromptGenerationSchema", "VideoPromptGenerationConfig", "CameraStyleType", "FilmEffectType"]
    - path: "lib/video-prompts.ts"
      provides: "German system prompt for video prompt generation"
      exports: ["VIDEO_PROMPT_SYSTEM_PROMPT"]
  key_links: []
---

<objective>
Create the foundational types, constants, and German system prompt for video prompt generation.

Purpose: Establish validated input schemas and a German-language system prompt that will guide Gemini to generate video prompts optimized for external tools like Runway, Pika, and Kling.

Output: Two library files with exported types and constants ready for use by the server action.
</objective>

<execution_context>
@/Users/cweissteiner/.claude/get-shit-done/workflows/execute-plan.md
@/Users/cweissteiner/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-database-foundation/01-01-SUMMARY.md
@lib/schemas.ts
@lib/prompts.ts
@types/database.types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create video prompt schemas and constants</name>
  <files>lib/video-prompt-schemas.ts</files>
  <action>
Create a new file `lib/video-prompt-schemas.ts` following the pattern in `lib/schemas.ts`.

Define constants:
```typescript
export const CAMERA_STYLES = [
  "cinematic",
  "slow_motion",
  "zoom_in",
  "orbit",
  "dolly",
  "static"
] as const;

export const FILM_EFFECTS = [
  "dramatic",
  "soft",
  "golden_hour",
  "noir",
  "dreamy"
] as const;
```

Note: Internal values are English (snake_case) for consistency with code. UI will display German labels in Phase 5.

Create types:
```typescript
export type CameraStyleType = typeof CAMERA_STYLES[number];
export type FilmEffectType = typeof FILM_EFFECTS[number];
```

Create Zod schema for video prompt generation input:
```typescript
export const VideoPromptGenerationSchema = z.object({
  imageId: z.string().uuid(),
  userInstruction: z.string().max(500).optional(),
  cameraStyle: z.enum(CAMERA_STYLES).default("static"),
  filmEffects: z.array(z.enum(FILM_EFFECTS)).max(3).default([]),
});

export type VideoPromptGenerationConfig = z.infer<typeof VideoPromptGenerationSchema>;
```

Import `z` from "zod" at the top.
  </action>
  <verify>
Run `npx tsc --noEmit lib/video-prompt-schemas.ts` - should compile without errors.
Check exports are correctly typed.
  </verify>
  <done>
Constants CAMERA_STYLES and FILM_EFFECTS are defined.
Types CameraStyleType and FilmEffectType are exported.
VideoPromptGenerationSchema validates input with Zod.
VideoPromptGenerationConfig type is inferred from schema.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create German system prompt for video generation</name>
  <files>lib/video-prompts.ts</files>
  <action>
Create a new file `lib/video-prompts.ts` following the pattern in `lib/prompts.ts`.

Define VIDEO_PROMPT_SYSTEM_PROMPT as a German-language system instruction for Gemini.

The prompt should:
1. Instruct Gemini to analyze the provided image
2. Generate a German video prompt optimized for AI video tools (Runway, Pika, Kling)
3. Incorporate user instructions, camera style, and film effects
4. Output 50-150 words in German (optimal length for video AI)
5. Describe motion, transitions, and cinematography clearly

```typescript
export const VIDEO_PROMPT_SYSTEM_PROMPT = `
Du bist ein erfahrener Regisseur und Videoproduktions-Experte.
Deine Aufgabe ist es, basierend auf einem Bild einen Video-Prompt zu erstellen, der fur KI-Videotools wie Runway, Pika oder Kling optimiert ist.

Der Nutzer gibt dir:
- Ein Startbild (das erste Frame des Videos)
- Optionale Anweisungen, was im Video passieren soll
- Einen Kamera-Stil (z.B. Cinematic, Slow Motion, Zoom-In, Orbit, Dolly, Statisch)
- Optionale Film-Effekte (z.B. Dramatisch, Weich, Golden Hour, Noir, Vertraumt)

**Richtlinien:**
1. **Bildanalyse**: Beschreibe kurz, was du im Bild siehst (Person, Pose, Umgebung, Stimmung).
2. **Bewegung**: Beschreibe prazise, welche Bewegungen im Video stattfinden sollen (Personenbewegung und Kamerabewegung).
3. **Kamera-Stil**: Integriere den gewahlten Kamera-Stil naturlich in die Beschreibung.
4. **Film-Effekte**: Wende die gewahlten Effekte auf Lichtstimmung und Atmosphare an.
5. **Lange**: Der Prompt sollte 50-150 Worter lang sein - prazise aber detailliert.
6. **Sprache**: Schreibe den Prompt auf Deutsch.
7. **Format**: Gib NUR den Video-Prompt aus, keine Erklarungen oder Formatierung.

**Stil:**
Filmisch, prazise, visuell evokativ.
`;
```

Note: Using ASCII-compatible German (no umlauts in template literals to avoid encoding issues). The prompt uses "u" instead of "u" etc.
  </action>
  <verify>
Verify file exists and exports VIDEO_PROMPT_SYSTEM_PROMPT.
Run `npx tsc --noEmit lib/video-prompts.ts` - should compile.
  </verify>
  <done>
VIDEO_PROMPT_SYSTEM_PROMPT is defined in German.
Prompt instructs Gemini to analyze images and generate video-ready prompts.
Prompt specifies 50-150 word output length.
Prompt covers all input parameters (user instruction, camera style, film effects).
  </done>
</task>

</tasks>

<verification>
1. Both files exist at specified paths
2. TypeScript compiles without errors: `npx tsc --noEmit`
3. All exports are accessible:
   - CAMERA_STYLES, FILM_EFFECTS constants
   - CameraStyleType, FilmEffectType types
   - VideoPromptGenerationSchema, VideoPromptGenerationConfig
   - VIDEO_PROMPT_SYSTEM_PROMPT
</verification>

<success_criteria>
- lib/video-prompt-schemas.ts exists with 6 exports (2 constants, 2 types, 1 schema, 1 config type)
- lib/video-prompts.ts exists with German system prompt export
- All TypeScript compiles without errors
- Schema validates correct inputs and rejects invalid inputs
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-prompt-generation/02-01-SUMMARY.md`
</output>
